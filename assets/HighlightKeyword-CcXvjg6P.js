import{r as c,a9 as K,j as e,B as m,C as O,s as G}from"./index-A5yLZ6sE.js";import{u as U,e as J}from"./memoApi-CxVg2pbB.js";import{d as b,R as Q}from"./toolsRequest-Dlqw7n8I.js";import{P as T}from"./index-r_tzkC_A.js";import{I as V,_ as W}from"./AntdIcon-BGhW0jrX.js";import{M as X}from"./index-M-fRZ1xO.js";import{R as u}from"./index-CFkJnFkl.js";import{I as Y}from"./index-C3rW4Mqv.js";import{D as k}from"./DateUtils-X_yZCMtP.js";import{R as Z,C as ee}from"./row-nJEp4c2c.js";var te={icon:function(l,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:l}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zM288 421a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm224 272c-85.5 0-155.6-67.3-160-151.6a8 8 0 018-8.4h48.1c4.2 0 7.8 3.2 8.1 7.4C420 589.9 461.5 629 512 629s92.1-39.1 95.8-88.6c.3-4.2 3.9-7.4 8.1-7.4H664a8 8 0 018 8.4C667.6 625.7 597.5 693 512 693zm176-224a48.01 48.01 0 010-96 48.01 48.01 0 010 96z",fill:n}},{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm376 112h-48.1c-4.2 0-7.8 3.2-8.1 7.4-3.7 49.5-45.3 88.6-95.8 88.6s-92-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4zm-24-112a48 48 0 1096 0 48 48 0 10-96 0z",fill:l}}]}},name:"smile",theme:"twotone"},ne=function(l,n){return c.createElement(V,W({},l,{ref:n,icon:te}))},se=c.forwardRef(ne);const oe="_sign_zqq62_2",re="_externalImgModel_zqq62_11",S={sign:oe,externalImgModel:re},{TextArea:le}=Y,{msg:B}=O,ae=[{src:"https://playground.z.wiki/img-cloud/index.html",title:"å¤–éƒ¨å›¾åºŠ1(å¯èƒ½å¤±æ•ˆ,æ³¨æ„ä¿¡æ¯å®‰å…¨)"},{src:`${b}/èšåˆå›¾åºŠ/`,title:"å¤–éƒ¨å›¾åºŠ2(æ•°æ®åœ¨å¤–éƒ¨ï¼Œæ³¨æ„ä¿¡æ¯å®‰å…¨)"},{src:`${b}/å®˜æ–¹å›¾åºŠ/`,title:"å®˜æ–¹å›¾åºŠ3"}],Re=({isOpen:o,setOpen:l,data:n,reList:a,currentMemoType:f})=>{const[s,i]=c.useState(null),[x,w]=c.useState(!1),[z,g]=c.useState(!1),[C,h]=c.useState(!1),p=c.useRef(null),{modal:R}=K.useApp();c.useEffect(()=>{i(n||{content:null,itemType:f})},[n]),c.useEffect(()=>{o&&window.setTimeout(()=>p.current?.focus(),100)},[o]);const j=(t=!0)=>{s.content&&s.content!==n?.content&&t?R.confirm({title:"æ£€æŸ¥åˆ°å†…å®¹å‘é€æ”¹å˜",content:"æ˜¯å¦ç¡®å®šä¸ä¿å­˜å†…å®¹ç›´æŽ¥å…³é—­ç¼–è¾‘æ¡†ï¼Ÿ",okText:"ç¡®è®¤å…³é—­",onOk:r}):r();function r(){h(!1),g(!1),window.setTimeout(()=>l(!1),100)}},_=async()=>{if(!s.itemType?.toString())return B.error("å¤‡å¿˜ç±»åž‹ä¸èƒ½ä¸ºç©º");if(!s.content)return B.error("å¤‡å¿˜å†…å®¹ä¸èƒ½ä¸ºç©º");w(!0);let t={};t.content=s.content===n?.content?null:s.content,t.itemType=s.itemType===n?.itemType?null:s.itemType,t.id=n?.id,await(n?U:J)(t)&&(j(!1),a()),w(!1)},E=(t,r)=>{y(`${r}${s.content?"":`
`}`),g(!1)},D=(t,r)=>{r[0]&&(y(`${r.join("~")}${s.content?"":`
`}`),h(!1))},I=e.jsx(Z,{children:ie.map(t=>e.jsx(ee,{span:3,onClick:()=>y(t),className:S.sign,children:t},t))}),y=t=>{const r=p.current?.resizableTextArea.textArea??{selectionStart:-1,selectionEnd:-1},d=r.selectionStart,q=r.selectionEnd,v=s.content??"",H=v.slice(0,d),P=v.slice(q);i(N=>({...N,content:`${H}${t}${P}`})),window.setTimeout(()=>{p.current&&(p.current?.resizableTextArea.textArea.setSelectionRange(d+t.length,d+t.length),p.current.focus())},100)},L=(t,r)=>R.info({title:t,style:{top:20},wrapClassName:S.externalImgModel,width:"100vh",okText:"å…³é—­",maskClosable:!0,content:e.jsx("iframe",{src:r,title:t,allow:"clipboard-read; clipboard-write",style:{width:"100%",height:"100%"}})}),A=e.jsxs("div",{children:[e.jsx("p",{children:"â— ç‚¹å‡»æ’å…¥æ—¶é—´/æ®µ,å¯æ’å…¥æ—¶é—´/æ®µåœ¨è¾“å…¥æ¡†å…‰æ ‡æ‰€åœ¨ä½ç½®"}),e.jsx("p",{children:"â— å¦‚æžœè¾“å…¥æ¡†æœ¬æ¥æ˜¯ç©ºçš„ æ’å…¥åŽä¼šå¤šåŠ ä¸€ä¸ªæ¢è¡Œ"}),e.jsx("p",{children:"â— å¦‚æžœé€‰ä¸­äº†æ–‡å­— æ’å…¥ä¼šè¦†ç›–å“¦"}),e.jsxs("p",{children:["â— æ’å…¥çš„ç¬¦å·æ›´å¤š",e.jsx(m,{type:"link",href:"https://blog.csdn.net/weixin_46665865/article/details/126132912",style:{padding:0},target:"_blank",children:"å‚è€ƒè¿™é‡Œ"})]})]}),F=[...ae.map(({title:t,src:r},d)=>e.jsxs(m,{onClick:()=>L(t,r),children:["å¤–éƒ¨å›¾åºŠ",d+1]},d)),e.jsx(T,{content:A,title:"å¸®åŠ©",children:e.jsx(m,{icon:e.jsx(Q,{}),shape:"circle"})},"help"),e.jsx(T,{content:I,title:"æ’å…¥ç¬¦å·",children:e.jsx(m,{icon:e.jsx(se,{}),shape:"circle"})},"insertSymbol"),e.jsx(m,{onClick:()=>h(t=>!t)||g(!1),children:"æ’å…¥æ—¥æœŸæ®µ"},"RangeButt"),e.jsx(m,{onClick:()=>g(t=>!t)||h(!1),children:"æ’å…¥æ—¥æœŸ"},"dateButt"),e.jsx(m,{onClick:j,children:"è¿”å›ž"},"back"),e.jsx(m,{type:"primary",onClick:_,loading:x,children:"æäº¤"},"submit")];return e.jsxs(X,{width:888,title:n?"ç¼–è¾‘å¤‡å¿˜":"æ–°å¢žå¤‡å¿˜",open:o,onCancel:j,footer:F,children:[e.jsx("div",{className:"lrCenter",children:e.jsxs(u.Group,{onChange:t=>i({...s,itemType:t.target.value}),value:s?.itemType,buttonStyle:"solid",style:{margin:5},children:[e.jsx(u.Button,{value:0,children:"æ™®é€š"}),e.jsx(u.Button,{value:1,children:"å¾ªçŽ¯"}),e.jsx(u.Button,{value:2,children:"é•¿æœŸ"}),e.jsx(u.Button,{value:3,children:"ç´§æ€¥"}),e.jsx(u.Button,{value:5,children:"æ—¥è®°"}),e.jsx(u.Button,{value:6,children:"å·¥ä½œ"}),e.jsx(u.Button,{value:7,children:"å…¶ä»–"})]})}),e.jsx(le,{rows:14,showCount:!0,ref:p,maxLength:s?.itemType===5?4e3:2e3,value:s?.content,placeholder:"è¯·è¾“å…¥å¤‡å¿˜å†…å®¹",onChange:t=>i({...s,content:t.target.value})}),e.jsx(k,{open:z,onChange:E,placement:"topRight",style:{left:480,top:30,height:20,visibility:"hidden"}}),e.jsx(k.RangePicker,{open:C,onChange:D,placement:"topRight",style:{left:100,height:20,display:C?"":"none"}},"dateRange")]})},ie=["â—","ðŸ­ã€","ðŸ®ã€","ðŸ¯ã€","ðŸ°ã€","ðŸ±ã€","ðŸ²ã€","ðŸ³ã€","ðŸ´ã€","ðŸµã€","ðŸ¬ã€","â™»","â–£","ã€“","â–¬","â–ˆ","â–¶","ðŸž‰","âš«","ð–¡Ž","ð’ˆž","ðŸ¡†","ðŸ¡„","ðŸ¢„","ðŸ¢…","â–›","â–€","â–œ","ð“‡»","â–","â—†","â„ƒ","ð–¤","ÖŽ","ð– ¢","ð–¦¹","ð“ƒ’","ðƒ¶","ð™¼","ðŸ˜¶â€ðŸŒ«ï¸"],M=/(https?:\/\/[^\s]+)/g,ce=/\.(jpeg|jpg|gif|png|bmp|webp|svg)|ipfs/i,me=/\.(mp4|webm|ogg|mov)$/i,ve=({children:o,linkImg:l,linkVideo:n})=>!o||typeof o!="string"?o:o.split(M).map((a,f)=>a.match(M)?l&&ce.test(a)?l(a,f):n&&me.test(a)?n(a,f):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:a},f):a),be=({content:o,keyword:l})=>{if(!o||!l)return o;const n=ue(l),a=new RegExp(`(${n})`,"gi"),f=o.split(a);let s=0;return e.jsx(e.Fragment,{children:f.map((i,x)=>e.jsx(G.Fragment,{children:i.toLowerCase()===l.toLowerCase()?e.jsx("b",{style:$[s++%$.length],children:i}):i},x))})},$=[{backgroundColor:"#0400ff29",color:"#000"},{backgroundColor:"#ff000029",color:"#000"}],ue=o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");export{Re as F,be as H,ve as L,ie as s};
