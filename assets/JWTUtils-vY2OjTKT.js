import{b1 as i,C as c}from"./index-A5yLZ6sE.js";class p{_jwt=localStorage.getItem("jwt");openModal=!1;infoModal=!1;constructor(){i(this)}set jwt(t){localStorage.setItem("jwt",t),this._jwt=t}get jwt(){return this._jwt}setOpenModal(t){this.openModal=t}setInfoModal(t){this.infoModal=t}clearJwt(){localStorage.removeItem("jwt"),localStorage.removeItem("backgroundImages"),this._jwt=null}}const a=new p;class d{static getToken(){return a.jwt}static parseJWT(t=this.getToken()){if(!t)return null;try{const o=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(o)?.split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2))?.join(""));return JSON.parse(n)}catch{a.clearJwt()}}static isExpired(t=this.parseJWT()){if(!t)return!0;const e=t.exp<Date.now()/1e3;return e&&a.clearJwt(),u(e),e}static getName(){const t=this.parseJWT();return t?.username||"ikun"+t?.userId?.substring(0,10)+"..."}static getId(){return this.parseJWT()?.userId||"noLogin"}static getAvatar(){return this.parseJWT()?.avatar}}let r=!0;const u=s=>{s&&r&&(setTimeout(()=>{c.msg.error("登录信息已失效，请重新登录。"),r=!1},500),setTimeout(()=>r=!0,1500))};export{d as J,a as U};
