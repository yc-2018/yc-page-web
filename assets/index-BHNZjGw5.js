import{r as e,h as se,m as ne,i as ae,k as ie,a5 as le,y as q,v as ce,aj as D,c as B,ah as de,z as ue}from"./index-f1YMPRds.js";import{R as ge}from"./useMergedState-DTxgtxFb.js";import{u as me,r as pe}from"./row-Dx7pK_Vw.js";import{P as ve}from"./index-BEIOo5xS.js";const H=e.createContext({}),fe=t=>{const{antCls:s,componentCls:n,iconCls:r,avatarBg:a,avatarColor:d,containerSize:C,containerSizeLG:u,containerSizeSM:y,textFontSize:x,textFontSizeLG:v,textFontSizeSM:k,borderRadius:w,borderRadiusLG:f,borderRadiusSM:$,lineWidth:S,lineType:b}=t,z=(o,h,O)=>({width:o,height:o,borderRadius:"50%",[`&${n}-square`]:{borderRadius:O},[`&${n}-icon`]:{fontSize:h,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},ae(t)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:d,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${ie(S)} ${b} transparent`,"&-image":{background:"transparent"},[`${s}-image-img`]:{display:"block"}}),z(C,x,w)),{"&-lg":Object.assign({},z(u,v,f)),"&-sm":Object.assign({},z(y,k,$)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Se=t=>{const{componentCls:s,groupBorderColor:n,groupOverlapping:r,groupSpace:a}=t;return{[`${s}-group`]:{display:"inline-flex",[s]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${s}-group-popover`]:{[`${s} + ${s}`]:{marginInlineStart:a}}}},he=t=>{const{controlHeight:s,controlHeightLG:n,controlHeightSM:r,fontSize:a,fontSizeLG:d,fontSizeXL:C,fontSizeHeading3:u,marginXS:y,marginXXS:x,colorBorderBg:v}=t;return{containerSize:s,containerSizeLG:n,containerSizeSM:r,textFontSize:Math.round((d+C)/2),textFontSizeLG:u,textFontSizeSM:a,groupSpace:x,groupOverlapping:-y,groupBorderColor:v}},J=se("Avatar",t=>{const{colorTextLightSolid:s,colorTextPlaceholder:n}=t,r=ne(t,{avatarBg:n,avatarColor:s});return[fe(r),Se(r)]},he);var Ce=function(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};const K=e.forwardRef((t,s)=>{const{prefixCls:n,shape:r,size:a,src:d,srcSet:C,icon:u,className:y,rootClassName:x,style:v,alt:k,draggable:w,children:f,crossOrigin:$,gap:S=4,onError:b}=t,z=Ce(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[o,h]=e.useState(1),[O,G]=e.useState(!1),[A,L]=e.useState(!0),I=e.useRef(null),E=e.useRef(null),P=le(s,I),{getPrefixCls:j,avatar:m}=e.useContext(q),g=e.useContext(H),R=()=>{if(!E.current||!I.current)return;const l=E.current.offsetWidth,i=I.current.offsetWidth;l!==0&&i!==0&&S*2<i&&h(i-S*2<l?(i-S*2)/l:1)};e.useEffect(()=>{G(!0)},[]),e.useEffect(()=>{L(!0),h(1)},[d]),e.useEffect(R,[S]);const F=()=>{(b==null?void 0:b())!==!1&&L(!1)},c=ce(l=>{var i,M;return(M=(i=a??(g==null?void 0:g.size))!==null&&i!==void 0?i:l)!==null&&M!==void 0?M:"default"}),_=Object.keys(typeof c=="object"?c||{}:{}).some(l=>["xs","sm","md","lg","xl","xxl"].includes(l)),T=me(_),Q=e.useMemo(()=>{if(typeof c!="object")return{};const l=pe.find(M=>T[M]),i=c[l];return i?{width:i,height:i,fontSize:i&&(u||f)?i/2:18}:{}},[T,c]),p=j("avatar",n),V=D(p),[U,Y,Z]=J(p,V),ee=B({[`${p}-lg`]:c==="large",[`${p}-sm`]:c==="small"}),W=e.isValidElement(d),te=r||(g==null?void 0:g.shape)||"circle",re=B(p,ee,m==null?void 0:m.className,`${p}-${te}`,{[`${p}-image`]:W||d&&A,[`${p}-icon`]:!!u},Z,V,y,x,Y),oe=typeof c=="number"?{width:c,height:c,fontSize:u?c/2:18}:{};let N;if(typeof d=="string"&&A)N=e.createElement("img",{src:d,draggable:w,srcSet:C,onError:F,alt:k,crossOrigin:$});else if(W)N=d;else if(u)N=u;else if(O||o!==1){const l=`scale(${o})`,i={msTransform:l,WebkitTransform:l,transform:l};N=e.createElement(ge,{onResize:R},e.createElement("span",{className:`${p}-string`,ref:E,style:Object.assign({},i)},f))}else N=e.createElement("span",{className:`${p}-string`,style:{opacity:0},ref:E},f);return U(e.createElement("span",Object.assign({},z,{style:Object.assign(Object.assign(Object.assign(Object.assign({},oe),Q),m==null?void 0:m.style),v),className:re,ref:P}),N))}),X=t=>{const{size:s,shape:n}=e.useContext(H),r=e.useMemo(()=>({size:t.size||s,shape:t.shape||n}),[t.size,t.shape,s,n]);return e.createElement(H.Provider,{value:r},t.children)},ye=t=>{var s,n,r,a;const{getPrefixCls:d,direction:C}=e.useContext(q),{prefixCls:u,className:y,rootClassName:x,style:v,maxCount:k,maxStyle:w,size:f,shape:$,maxPopoverPlacement:S,maxPopoverTrigger:b,children:z,max:o}=t,h=d("avatar",u),O=`${h}-group`,G=D(h),[A,L,I]=J(h,G),E=B(O,{[`${O}-rtl`]:C==="rtl"},I,G,y,x,L),P=de(z).map((g,R)=>ue(g,{key:`avatar-key-${R}`})),j=(o==null?void 0:o.count)||k,m=P.length;if(j&&j<m){const g=P.slice(0,j),R=P.slice(j,m),F=(o==null?void 0:o.style)||w,c=((s=o==null?void 0:o.popover)===null||s===void 0?void 0:s.trigger)||b||"hover",_=((n=o==null?void 0:o.popover)===null||n===void 0?void 0:n.placement)||S||"top",T=Object.assign(Object.assign({content:R},o==null?void 0:o.popover),{classNames:{root:B(`${O}-popover`,(a=(r=o==null?void 0:o.popover)===null||r===void 0?void 0:r.classNames)===null||a===void 0?void 0:a.root)},placement:_,trigger:c});return g.push(e.createElement(ve,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},T),e.createElement(K,{style:F},`+${m-j}`))),A(e.createElement(X,{shape:$,size:f},e.createElement("div",{className:E,style:v},g)))}return A(e.createElement(X,{shape:$,size:f},e.createElement("div",{className:E,style:v},P)))},xe=K;xe.Group=ye;export{xe as A};
