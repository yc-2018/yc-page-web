import{a as c}from"./index-C0RmN517.js";import{C as a}from"./index-f1YMPRds.js";import{U as n,J as m}from"./JWTUtils-DLG_3aPf.js";const i="https://yc556.cn/api",{msg:r}=a,p=async e=>{try{const t=await o.get(e);return(t==null?void 0:t.data)??{}}catch(t){return console.log(`%c${e}的get请求失败:`,"color: red;font-size: 20px;",t),{success:!1,code:0,msg:"get请求失败"}}},g=async(e,t)=>{try{const s=await o.post(e,t);return(s==null?void 0:s.data)??{}}catch(s){return console.log(`%c${e}的post请求失败:`,"color: red;font-size: 20px;",s),{success:!1,code:0,msg:"post请求失败"}}},f=async(e,t)=>{try{const s=await o({url:e,method:"put",data:t});return(s==null?void 0:s.data)??{}}catch(s){return console.log(`%c${e}的put请求失败:`,"color: red;font-size: 20px;",s),{success:!1,code:0,msg:"put请求失败"}}},y=async(e,t)=>{try{const s=await o({url:e,method:"delete",data:t});return(s==null?void 0:s.data)??{}}catch(s){return console.log(`%c${e}的delete请求失败:`,"color: red;font-size: 20px;",s),{success:!1,code:0,msg:"delete请求失败"}}},o=c.create({baseURL:i,timeout:1e4});o.interceptors.request.use(e=>{const t=n.jwt;return m.isExpired()?Promise.reject(new Error("Token expired")):(e.headers.Authorization=`Bearer ${t}`,e)},e=>Promise.reject(e));o.interceptors.response.use(e=>(e.data.code!==1&&r.error(e.data.msg),e),e=>{let t;return e.response&&e.response.status===401?(t="未登录或登录已过期，请重新登录。",window.location.href="/"):e.response&&e.response.status>400?t=`错误：${e.response.status} - ${e.response.data.message}`:e.message&&e.message.includes("timeout")?t="请求超时，请检查网络连接或稍后重试":t="网络错误，请检查您的网络连接",r.error(t),{code:0,msg:e.message}});export{p as a,o as b,y as c,f as d,i as e,g as m};
