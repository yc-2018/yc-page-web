import{r as t,M as oe,j as s,o as ne,C as ae,J as le,S as q,N as ce,B as M,L as v}from"./index-f1YMPRds.js";import{s as b}from"./ShowOrNot-Cql3wJo2.js";import{J as E,U as V}from"./JWTUtils-DLG_3aPf.js";import{a as ie,e as de}from"./NoLoginData-jnf33Hf6.js";import{M as ue}from"./MyEmpty-2JcUG-sm.js";import{D as fe,R as G,a as pe,S as he,T as me}from"./index-DI1ypm2a.js";import{g as xe,e as ge,u as je,d as ve}from"./memoApi-DhbOTOup.js";import{S as C}from"./index-D_7exumZ.js";import{a as K,R as Q}from"./SyncOutlined-COh6P0ev.js";import{I as F}from"./index-BUIwELm1.js";import{I,_ as k}from"./AntdIcon-DOlxDjpc.js";import{C as we}from"./useIcons-b-vPc-aM.js";import{R as Ce}from"./EditOutlined-DrJLgKTS.js";import{R as Se}from"./ExclamationCircleFilled-ZcTLflCt.js";import"./colors-CI0yjLlk.js";import"./myAxios-BIVIHpI2.js";import"./index-C0RmN517.js";import"./useMergedState-DTxgtxFb.js";import"./isMobile-DjGTsQxe.js";import"./Overflow-C8ZKkp8Z.js";import"./index-uePLcMZT.js";import"./PurePanel-_rSNh8S4.js";import"./index-BzYRzDzH.js";import"./index-DvQUwNhg.js";import"./move-9h65hhgq.js";import"./BaseInput-MPvJHzzE.js";import"./TextArea-BeCUnayI.js";import"./SearchOutlined-Cmz87yFm.js";import"./DownOutlined-moeKAr2a.js";var Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"},ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},Me=function(n,u){return t.createElement(I,k({},n,{ref:u,icon:we}))},be=t.forwardRef(Me),Ee=function(n,u){return t.createElement(I,k({},n,{ref:u,icon:oe}))},Oe=t.forwardRef(Ee),$e=function(n,u){return t.createElement(I,k({},n,{ref:u,icon:Re}))},Ie=t.forwardRef($e),ke=function(n,u){return t.createElement(I,k({},n,{ref:u,icon:ye}))},ze=t.forwardRef(ke);const Le="_btn_1deyz_1",Ne={btn:Le},De=({children:c,onClick:n})=>s.jsx("button",{className:Ne.btn,onClick:n,children:c});let x=0,X=!0,_=1,r=[],O="",$=5,w=null;function Te(){const[c,n]=t.useState(!1),[u,S]=t.useState(!1),[o,p]=t.useState(-1),[i,z]=t.useState(null),[d,L]=t.useState(null),[W,N]=t.useState(!0),[A,D]=t.useState(null),[Y,T]=t.useState(!1),{msg:g}=ae,{modal:Z}=le.useApp();t.useEffect(()=>{X&&b.englishDrawerShow&&!E.isExpired()&&(X=!1,B())},[b.englishDrawerShow,V.jwt]);const B=async()=>{n(!0);const e=await xe({type:4,page:_,orderBy:$,firstLetter:w,keyword:O});n(!1),e.code===1&&(r=[...r,...e.data.records],x=e.data.total,_++)},H=()=>{if(c)return g.info("正在加载中....");$=5,w=null,O=null,N(!0),D(null),j()},j=()=>{r=[],_=1,B(),p(-1)},ee=()=>{if(!o)return g.info("请在列表一个条输入");++x,r=[{id:void 0},...r],p(void 0),z(void 0),L(void 0),T(!0)},P=async e=>{var l,J,U;const{id:a}=e,[h,m]=((l=e==null?void 0:e.content)==null?void 0:l.split("@@@"))??[void 0,void 0],f=`${(i==null?void 0:i.trim())??""}@@@${(d==null?void 0:d.trim())??""}`;if(a===o){if(!(i!=null&&i.trim())||!(d!=null&&d.trim()))return g.warning("输入框不能为空");if(((J=i==null?void 0:i.trim())==null?void 0:J.length)>100||((U=d==null?void 0:d.trim())==null?void 0:U.length)>100)return g.warning("输入框最多100个字符");if(f===e.content)return g.info("没有变化",p(-1));if(o){S(!0);const y=await je({id:e.id,content:f});S(!1),y&&(p(-1),e.content=`${i??""}@@@${d??""}`)}else{S(!0);const y=await ge({itemType:4,content:f});S(!1),y&&(e.id=y,e.content=f,p(-1))}}else!o&&r.shift()&&--x,p(a),L(m),z(h),T(!0)},se=async e=>{const{id:a}=e;a===o?(!o&&r.shift()&&g.info("取消新增")&&--x,p(-1)):Z.confirm({title:"确定删除吗?",icon:s.jsx(Se,{}),content:"删除了就会消失了",maskClosable:!0,onOk(){return new Promise(async(h,m)=>await ve(a)?(--x,p(-1*a),r=r.filter(l=>l.id!==a),h()):m())}})},te=()=>c?s.jsxs(s.Fragment,{children:[s.jsx(v,{active:!0}),s.jsx(v,{active:!0}),s.jsx(v,{active:!0})]}):x>(r==null?void 0:r.length)?s.jsx("div",{className:"loadMore",children:s.jsx(De,{onClick:()=>B(),children:"加载更多"})}):x?s.jsx(K,{className:"loadMore",plain:!0,children:"🥺到底啦🐾"}):s.jsx(ue,{}),R=(e,a="processing",h,m,f=!1)=>s.jsx(me,{icon:h,color:a,onClick:m,bordered:f,className:`pointer ${w===e?"eCurrentTag":""}`,children:e},e),re=()=>r==null?void 0:r.map(e=>{var a,h,m,f;return s.jsx(C,{className:["topBottMargin5",e.id===o&&"borderLight"||""].join(" "),children:s.jsxs(C.Compact,{children:[s.jsx(M,{icon:o===e.id?s.jsx(be,{}):s.jsx(Ce,{}),onClick:()=>{P(e)}}),s.jsx(F,{value:e.id===o?i:((h=(a=e==null?void 0:e.content)==null?void 0:a.split("@@@"))==null?void 0:h[0])??"",placeholder:"请输入英文",onChange:l=>e.id===o&&z(l.target.value),ref:l=>Y&&e.id===o&&(T(!1)||(l==null?void 0:l.focus())),onPressEnter:()=>P(e)}),s.jsx(F,{value:e.id===o?d:((f=(m=e==null?void 0:e.content)==null?void 0:m.split("@@@"))==null?void 0:f[1])??"",placeholder:"请输入中文",onChange:l=>e.id===o&&L(l.target.value),onPressEnter:()=>P(e)}),s.jsx(M,{icon:o===e.id?s.jsx(Oe,{}):s.jsx(G,{}),className:"rightRadius6",onClick:()=>se(e)})]})},e.id??"newItem")});return s.jsx(fe,{placement:"left",width:450,closeIcon:!1,style:{opacity:.8},open:b.englishDrawerShow,onClose:()=>b.setEnglishDrawerShow(!1),title:s.jsxs(q,{indicator:s.jsx(s.Fragment,{}),spinning:u,children:[s.jsx(Q,{className:"refresh",spin:c,onClick:H})," ","备忘英语"]}),extra:!E.isExpired()&&s.jsx(s.Fragment,{children:s.jsx(he,{value:$,onChange:e=>j($=e),options:de,loading:c})}),footer:!E.isExpired()&&s.jsxs(C,{style:{display:"grid",justifyContent:"center"},children:["    ",s.jsxs(C.Compact,{children:[s.jsx(M,{icon:W?s.jsx(G,{}):s.jsx(pe,{twoToneColor:"red"}),onClick:()=>{O=null,!W&&j(),N(!0),D(null)}}),s.jsx(F.Search,{placeholder:"要搜索内容吗😶‍🌫️",value:A,style:{width:300},onChange:e=>D(e.target.value)||(O=e.target.value),onSearch:()=>A&&(j()||N(!1))})]})]}),children:E.isExpired()?s.jsxs("div",{className:"loadMore",onClick:()=>V.setOpenModal(!0),children:[s.jsxs(K,{plain:!0,children:["🥺",s.jsx(M,{type:"link",children:"请先登录"}),"🐾"]}),s.jsx(v,{}),s.jsx(v,{}),s.jsx(v,{})]}):s.jsxs(q,{indicator:s.jsx(ce,{}),spinning:u,children:[s.jsxs(C,{size:[0,"small"],wrap:!0,children:[ie.map(e=>R(e.value,e.color,void 0,()=>{if(e.value===w)return j(w=void 0);w=e.value,j()})),R("添加一条","#75b659",s.jsx(ze,{}),ee),R("重置列表","#fa575c",s.jsx(Q,{spin:c}),H),R(`总数:${x}`,"#55acee",s.jsx(Ie,{}))]}),re(),te()]})})}const fs=ne(Te);export{fs as default};
