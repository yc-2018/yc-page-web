import{m as k,t as O,u as P,w,a as R,b as K}from"./index-DLCjuoeY.js";import{u as N,L as g,a as I,b as x,c as F,d as A}from"./index--PGS_ZZL.js";import{r as c,s as l,f as C}from"./index-A5yLZ6sE.js";import{o as V}from"./use-mutation-effect-Cos6QYUH.js";var $=function(n){c.useEffect(function(){n?.()},[])};function D(n){return c.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n,{style:Object.assign({verticalAlign:"-0.125em"},n.style),className:["antd-mobile-icon",n.className].filter(Boolean).join(" ")}),c.createElement("g",{id:"DownOutline-DownOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},c.createElement("g",null,c.createElement("rect",{id:"DownOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),c.createElement("path",{d:"M5.11219264,16.3947957 L22.6612572,34.5767382 L22.6612572,34.5767382 C23.2125856,35.1304785 24.0863155,35.1630514 24.6755735,34.6744571 L24.7825775,34.5767382 L42.8834676,16.3956061 C42.9580998,16.320643 43,16.2191697 43,16.1133896 L43,12.9866673 C43,12.7657534 42.8209139,12.5866673 42.6,12.5866673 C42.4936115,12.5866673 42.391606,12.6290496 42.316542,12.7044413 L23.7816937,31.3201933 L23.7816937,31.3201933 L5.6866816,12.7237117 C5.53262122,12.5653818 5.27937888,12.5619207 5.121049,12.7159811 C5.04365775,12.7912854 5,12.8946805 5,13.0026627 L5,16.1170064 C5,16.2206403 5.04022164,16.3202292 5.11219264,16.3947957 Z",id:"DownOutline-down",fill:"currentColor",fillRule:"nonzero"}))))}const f="adm-collapse",_=()=>null,M=n=>{const{visible:s}=n,t=c.useRef(null),h=I(s,n.forceRender,n.destroyOnClose),[{height:v},a]=x(()=>({from:{height:0},config:{precision:.01,mass:1,tension:200,friction:25,clamp:!0}}));return $(()=>{if(!s)return;const o=t.current;o&&a.start({height:o.offsetHeight,immediate:!0})}),F(()=>{const o=t.current;if(o)if(s){let u=0,e=()=>{};const r=()=>{u+=1;const i=u;a.start({height:o.offsetHeight})[0].then(()=>{i===u&&e()})};return e=V(o,{childList:!0,subtree:!0},r),r(),e}else a.start({height:o.offsetHeight,immediate:!0}),a.start({height:0})},[s]),l.createElement(A.div,{className:C(`${f}-panel-content`,{[`${f}-panel-content-active`]:s}),style:{height:v.to(o=>v.idle&&s?"auto":o)}},l.createElement("div",{className:`${f}-panel-content-inner`,ref:t},l.createElement(g.Item,null,h&&n.children)))},j=n=>{const{collapse:s={}}=N(),t=k(s,n),h=[];O(t.children,e=>{!c.isValidElement(e)||typeof e.key!="string"||h.push(e)});const v=()=>{var e;if(!t.accordion)return{value:t.activeKey,defaultValue:(e=t.defaultActiveKey)!==null&&e!==void 0?e:[],onChange:t.onChange};const r={value:[],defaultValue:[],onChange:i=>{var m,d;(m=t.onChange)===null||m===void 0||m.call(t,(d=i[0])!==null&&d!==void 0?d:null)}};return t.activeKey===void 0?r.value=void 0:t.activeKey!==null&&(r.value=[t.activeKey]),[null,void 0].includes(t.defaultActiveKey)||(r.defaultValue=[t.defaultActiveKey]),r},[a,o]=P(v()),u=a===null?[]:Array.isArray(a)?a:[a];return w(t,l.createElement("div",{className:f},l.createElement(g,null,h.map(e=>{const r=e.key,i=u.includes(r);function m(b){var y,p;t.accordion?o(i?[]:[r]):o(i?u.filter(L=>L!==r):[...u,r]),(p=(y=e.props).onClick)===null||p===void 0||p.call(y,b)}const d=R(l.createElement(D,null),t.arrow,t.arrowIcon,e.props.arrow,e.props.arrowIcon),E=typeof d=="function"?d(i):l.createElement("div",{className:C(`${f}-arrow`,{[`${f}-arrow-active`]:i})},d);return l.createElement(l.Fragment,{key:r},w(e.props,l.createElement(g.Item,{className:`${f}-panel-header`,onClick:m,disabled:e.props.disabled,arrowIcon:E},e.props.title)),l.createElement(M,{visible:i,forceRender:!!e.props.forceRender,destroyOnClose:!!e.props.destroyOnClose},e.props.children))}))))},T=K(j,{Panel:_});export{T as C};
