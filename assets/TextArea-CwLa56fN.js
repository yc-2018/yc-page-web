import{r as s,x as ze,k as E,q as Se,s as R,am as De,n as B,a7 as ye,t as Re,f as D,_ as he,w as Ce,v as Pe,g as je,m as He,N as Le,$ as Be,av as We,J as Ke,aX as qe,W as Ye}from"./index-A5yLZ6sE.js";import{B as Xe,r as we,t as Ze}from"./BaseInput-DtphrZ4s.js";import{u as Ee,R as Ge}from"./useMergedState-CNW99mOk.js";import{i as Ue,a as Je,q as Qe,u as ke,e as et,f as tt}from"./index-DsgbjGfF.js";var at=["show"];function nt(e,t){return s.useMemo(function(){var a={};t&&(a.show=ze(t)==="object"&&t.formatter?t.formatter:!!t),a=E(E({},a),e);var n=a,l=n.show,d=Se(n,at);return E(E({},d),{},{show:!!l,showFormatter:typeof l=="function"?l:void 0,strategy:d.strategy||function(o){return o.length}})},[e,t])}const rt=e=>{let t;return typeof e=="object"&&e?.clearIcon?t=e:e&&(t={clearIcon:R.createElement(De,null)}),t};var ot=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,it=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ve={},w;function st(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&ve[a])return ve[a];var n=window.getComputedStyle(e),l=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),d=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),o=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),g=it.map(function(f){return"".concat(f,":").concat(n.getPropertyValue(f))}).join(";"),S={sizingStyle:g,paddingSize:d,borderSize:o,boxSizing:l};return t&&a&&(ve[a]=S),S}function lt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;w||(w=document.createElement("textarea"),w.setAttribute("tab-index","-1"),w.setAttribute("aria-hidden","true"),w.setAttribute("name","hiddenTextarea"),document.body.appendChild(w)),e.getAttribute("wrap")?w.setAttribute("wrap",e.getAttribute("wrap")):w.removeAttribute("wrap");var l=st(e,t),d=l.paddingSize,o=l.borderSize,g=l.boxSizing,S=l.sizingStyle;w.setAttribute("style","".concat(S,";").concat(ot)),w.value=e.value||e.placeholder||"";var f=void 0,v=void 0,z,b=w.scrollHeight;if(g==="border-box"?b+=o:g==="content-box"&&(b-=d),a!==null||n!==null){w.value=" ";var O=w.scrollHeight-d;a!==null&&(f=O*a,g==="border-box"&&(f=f+d+o),b=Math.max(f,b)),n!==null&&(v=O*n,g==="border-box"&&(v=v+d+o),z=b>v?"":"hidden",b=Math.min(v,b))}var x={height:b,overflowY:z,resize:"none"};return f&&(x.minHeight=f),v&&(x.maxHeight=v),x}var ut=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],ge=0,pe=1,xe=2,ct=s.forwardRef(function(e,t){var a=e,n=a.prefixCls,l=a.defaultValue,d=a.value,o=a.autoSize,g=a.onResize,S=a.className,f=a.style,v=a.disabled,z=a.onChange;a.onInternalAutoSize;var b=Se(a,ut),O=Ee(l,{value:d,postState:function(p){return p??""}}),x=B(O,2),P=x[0],W=x[1],K=function(p){W(p.target.value),z?.(p)},y=s.useRef();s.useImperativeHandle(t,function(){return{textArea:y.current}});var j=s.useMemo(function(){return o&&ze(o)==="object"?[o.minRows,o.maxRows]:[]},[o]),q=B(j,2),h=q[0],A=q[1],V=!!o,te=function(){try{if(document.activeElement===y.current){var p=y.current,ee=p.selectionStart,H=p.selectionEnd,ne=p.scrollTop;y.current.setSelectionRange(ee,H),y.current.scrollTop=ne}}catch{}},Y=s.useState(xe),X=B(Y,2),I=X[0],M=X[1],ae=s.useState(),U=B(ae,2),J=U[0],Z=U[1],$=function(){M(ge)};ye(function(){V&&$()},[d,h,A,V]),ye(function(){if(I===ge)M(pe);else if(I===pe){var C=lt(y.current,!1,h,A);M(xe),Z(C)}else te()},[I]);var i=s.useRef(),G=function(){Ce.cancel(i.current)},Q=function(p){I===xe&&(g?.(p),o&&(G(),i.current=Ce(function(){$()})))};s.useEffect(function(){return G},[]);var k=V?J:null,F=E(E({},f),k);return(I===ge||I===pe)&&(F.overflowY="hidden",F.overflowX="hidden"),s.createElement(Ge,{onResize:Q,disabled:!(o||g)},s.createElement("textarea",Re({},b,{ref:y,style:F,className:D(n,S,he({},"".concat(n,"-disabled"),v)),disabled:v,value:P,onChange:K})))}),dt=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],ft=R.forwardRef(function(e,t){var a,n=e.defaultValue,l=e.value,d=e.onFocus,o=e.onBlur,g=e.onChange,S=e.allowClear,f=e.maxLength,v=e.onCompositionStart,z=e.onCompositionEnd,b=e.suffix,O=e.prefixCls,x=O===void 0?"rc-textarea":O,P=e.showCount,W=e.count,K=e.className,y=e.style,j=e.disabled,q=e.hidden,h=e.classNames,A=e.styles,V=e.onResize,te=e.onClear,Y=e.onPressEnter,X=e.readOnly,I=e.autoSize,M=e.onKeyDown,ae=Se(e,dt),U=Ee(n,{value:l,defaultValue:n}),J=B(U,2),Z=J[0],$=J[1],i=Z==null?"":String(Z),G=R.useState(!1),Q=B(G,2),k=Q[0],F=Q[1],C=R.useRef(!1),p=R.useState(null),ee=B(p,2),H=ee[0],ne=ee[1],re=s.useRef(null),oe=s.useRef(null),N=function(){var r;return(r=oe.current)===null||r===void 0?void 0:r.textArea},ie=function(){N().focus()};s.useImperativeHandle(t,function(){var m;return{resizableTextArea:oe.current,focus:ie,blur:function(){N().blur()},nativeElement:((m=re.current)===null||m===void 0?void 0:m.nativeElement)||N()}}),s.useEffect(function(){F(function(m){return!j&&m})},[j]);var de=R.useState(null),ue=B(de,2),se=ue[0],fe=ue[1];R.useEffect(function(){if(se){var m;(m=N()).setSelectionRange.apply(m,Pe(se))}},[se]);var c=nt(W,P),u=(a=c.max)!==null&&a!==void 0?a:f,_=Number(u)>0,T=c.strategy(i),Ae=!!u&&T>u,be=function(r,L){var ce=L;!C.current&&c.exceedFormatter&&c.max&&c.strategy(L)>c.max&&(ce=c.exceedFormatter(L,{max:c.max}),L!==ce&&fe([N().selectionStart||0,N().selectionEnd||0])),$(ce),we(r.currentTarget,r,g,ce)},Ie=function(r){C.current=!0,v?.(r)},$e=function(r){C.current=!1,be(r,r.currentTarget.value),z?.(r)},Ne=function(r){be(r,r.target.value)},Te=function(r){r.key==="Enter"&&Y&&Y(r),M?.(r)},Oe=function(r){F(!0),d?.(r)},Ve=function(r){F(!1),o?.(r)},Me=function(r){$(""),ie(),we(N(),r,g)},me=b,le;c.show&&(c.showFormatter?le=c.showFormatter({value:i,count:T,maxLength:u}):le="".concat(T).concat(_?" / ".concat(u):""),me=R.createElement(R.Fragment,null,me,R.createElement("span",{className:D("".concat(x,"-data-count"),h?.count),style:A?.count},le)));var Fe=function(r){var L;V?.(r),(L=N())!==null&&L!==void 0&&L.style.height&&ne(!0)},_e=!I&&!P&&!S;return R.createElement(Xe,{ref:re,value:i,allowClear:S,handleReset:Me,suffix:me,prefixCls:x,classNames:E(E({},h),{},{affixWrapper:D(h?.affixWrapper,he(he({},"".concat(x,"-show-count"),P),"".concat(x,"-textarea-allow-clear"),S))}),disabled:j,focused:k,className:D(K,Ae&&"".concat(x,"-out-of-range")),style:E(E({},y),H&&!_e?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof le=="string"?le:void 0}},hidden:q,readOnly:X,onClear:te},R.createElement(ct,Re({},ae,{autoSize:I,maxLength:f,onKeyDown:Te,onChange:Ne,onFocus:Oe,onBlur:Ve,onCompositionStart:Ie,onCompositionEnd:$e,className:D(h?.textarea),style:E(E({},A?.textarea),{},{resize:y?.resize}),disabled:j,prefixCls:x,onResize:Fe,ref:oe,readOnly:X})))});const mt=e=>{const{componentCls:t,paddingLG:a}=e,n=`${t}-textarea`;return{[`textarea${t}`]:{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}`,resize:"vertical",[`&${t}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${t}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[n]:{position:"relative","&-show-count":{[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${t},
        &-affix-wrapper${n}-has-feedback ${t}
      `]:{paddingInlineEnd:a},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${n}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${t}-affix-wrapper-rtl`]:{[`${t}-suffix`]:{[`${t}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},vt=je(["Input","TextArea"],e=>{const t=He(e,Ue(e));return[mt(t)]},Je,{resetFont:!1});var gt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]]);return a};const bt=s.forwardRef((e,t)=>{var a;const{prefixCls:n,bordered:l=!0,size:d,disabled:o,status:g,allowClear:S,classNames:f,rootClassName:v,className:z,style:b,styles:O,variant:x,showCount:P,onMouseDown:W,onResize:K}=e,y=gt(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:j,direction:q,allowClear:h,autoComplete:A,className:V,style:te,classNames:Y,styles:X}=Le("textArea"),I=s.useContext(Be),M=o??I,{status:ae,hasFeedback:U,feedbackIcon:J}=s.useContext(We),Z=tt(ae,g),$=s.useRef(null);s.useImperativeHandle(t,()=>{var c;return{resizableTextArea:(c=$.current)===null||c===void 0?void 0:c.resizableTextArea,focus:u=>{var _,T;Ze((T=(_=$.current)===null||_===void 0?void 0:_.resizableTextArea)===null||T===void 0?void 0:T.textArea,u)},blur:()=>{var u;return(u=$.current)===null||u===void 0?void 0:u.blur()}}});const i=j("input",n),G=Ke(i),[Q,k,F]=Qe(i,v),[C]=vt(i,G),{compactSize:p,compactItemClassnames:ee}=qe(i,q),H=Ye(c=>{var u;return(u=d??p)!==null&&u!==void 0?u:c}),[ne,re]=ke("textArea",x,l),oe=rt(S??h),[N,ie]=s.useState(!1),[de,ue]=s.useState(!1),se=c=>{ie(!0),W?.(c);const u=()=>{ie(!1),document.removeEventListener("mouseup",u)};document.addEventListener("mouseup",u)},fe=c=>{var u,_;if(K?.(c),N&&typeof getComputedStyle=="function"){const T=(_=(u=$.current)===null||u===void 0?void 0:u.nativeElement)===null||_===void 0?void 0:_.querySelector("textarea");T&&getComputedStyle(T).resize==="both"&&ue(!0)}};return Q(C(s.createElement(ft,Object.assign({autoComplete:A},y,{style:Object.assign(Object.assign({},te),b),styles:Object.assign(Object.assign({},X),O),disabled:M,allowClear:oe,className:D(F,G,z,v,ee,V,de&&`${i}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},f),Y),{textarea:D({[`${i}-sm`]:H==="small",[`${i}-lg`]:H==="large"},k,f?.textarea,Y.textarea,N&&`${i}-mouse-active`),variant:D({[`${i}-${ne}`]:re},et(i,Z)),affixWrapper:D(`${i}-textarea-affix-wrapper`,{[`${i}-affix-wrapper-rtl`]:q==="rtl",[`${i}-affix-wrapper-sm`]:H==="small",[`${i}-affix-wrapper-lg`]:H==="large",[`${i}-textarea-show-count`]:P||((a=e.count)===null||a===void 0?void 0:a.show)},k)}),prefixCls:i,suffix:U&&s.createElement("span",{className:`${i}-textarea-suffix`},J),showCount:P,ref:$,onResize:fe,onMouseDown:se}))))});export{bt as T,rt as g,nt as u};
